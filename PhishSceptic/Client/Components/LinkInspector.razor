@inject IDialogService DialogService

<DashboardItem Title="URL Inspector" Description="This component analyses all of the links in the email body.">
    <ComponentBody>
        @if (urls.Count() > 0)
        {
            <MudGrid Spacing="1" Justify="Justify.Center">
                <MudItem lg="3" md="4">
                    <MudStack>
                        <MudText>URLs</MudText>
                        <MudPaper Elevation="4" Outlined Class="d-flex align-center" Height="120px" Width="120px">
                            <MudText Align="Align.Center" Typo="Typo.h2" Style="width:100%;">@urls.Count() </MudText>
                        </MudPaper>
                    </MudStack>

                </MudItem>
                        <MudItem lg="3" md="4">
                        <MudStack>
                        <MudText>Domains</MudText>
                        <MudPaper Elevation="4" Outlined Class="d-flex align-center" Height="120px" Width="120px">
                        <MudText Align="Align.Center" Typo="Typo.h2" Style="width:100%;">@domains.Count() </MudText>
                        </MudPaper>
                        </MudStack>

                        </MudItem>
                        <MudItem lg="3" md="4">
                        <MudStack>
                        <MudText>Shortened URLs</MudText>
                        <MudTooltip Text="Attackers sometimes disguise malicious links with shortened URLs"
                                        Arrow Placement="Placement.Right">
                        <MudPaper Elevation="4" Outlined Class="d-flex align-center" Height="120px" Width="120px">
                            <MudText Color="@((shortenedDomains.Count()>0) ? Color.Error : Color.Default)" Align="Align.Center" Typo="Typo.h2" Style="width:100%;">@shortenedDomains.Count() </MudText>
                            </MudPaper>
                            </MudTooltip>
                            </MudStack>

                            </MudItem>
                            <MudItem lg="3" md="4">
                            <MudStack>
                            <MudText>URLs with anchors</MudText>
                            <MudTooltip Text="Attackers can manipulate URL anchors maliciously."
                                        Arrow Placement="Placement.Right">
                        <MudPaper Elevation="4" Outlined Class="d-flex align-center" Height="120px" Width="120px">
                            <MudText Color="@((urlsContainingAnchors.Count()>0) ? Color.Error : Color.Default)" Align="Align.Center" Typo="Typo.h2" Style="width:100%;">@urlsContainingAnchors.Count() </MudText>
                            </MudPaper>
                            </MudTooltip>
                            </MudStack>

                            </MudItem>
                            </MudGrid>

                            <MudDivider Class="my-4"></MudDivider>

                            <MudText Typo="Typo.h6">Domains referenced in email body:</MudText>
                            <MudText Color="Color.Info" Class="mb-6">Info: Click on each of the domains to verify them.</MudText>
            @foreach(string domain in domains)
            {
                <DomainChip Domain="@domain"></DomainChip>
            }

        }
        else
        {
            <MudText Color="Color.Info" Align="Align.Center">This email contains no links.</MudText>
        }
    </ComponentBody>
    <ComponentHelp>
        <LinkInspectorHelp/>
    </ComponentHelp>

</DashboardItem>



