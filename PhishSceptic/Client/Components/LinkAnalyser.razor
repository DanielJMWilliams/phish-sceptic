@inject IDialogService DialogService

<MudText Typo="Typo.h3">Link Analyser</MudText>
<MudText>This component analyses all of the links in the email body.</MudText>
<MudPaper Elevation="1" Class="my-5 pa-4">

    <MudGrid Spacing="10" Justify="Justify.Center">
        <MudItem>
            <MudText Align="Align.Center"># of links</MudText>
            <MudPaper Elevation="4" Class="d-flex align-center" Height="140px" Width="140px">
                <MudText Align="Align.Center" Typo="Typo.h2" Style="width:100%;" >@urls.Count() </MudText>
            </MudPaper>
        </MudItem>
        <MudItem>
             <MudText Align="Align.Center"># of domains</MudText>
            <MudPaper Elevation="4" Class="d-flex align-center" Height="140px" Width="140px">
                <MudText Align="Align.Center" Typo="Typo.h2" Style="width:100%;" >@domains.Count() </MudText>
            </MudPaper>
        </MudItem>
        <MudItem>
            <MudText Align="Align.Center"># of shortened links</MudText>
            <MudTooltip Text="Attackers sometimes disguise malicious links with shortened URLs"
                        Arrow="true" Placement="Placement.Right">
                <MudPaper Elevation="4" Class="d-flex align-center" Height="140px" Width="140px">
                    <MudText Color="@((shortenedDomains.Count()>0) ? Color.Error : Color.Default)" Align="Align.Center" Typo="Typo.h2" Style="width:100%;" >@shortenedDomains.Count() </MudText>
                </MudPaper>
            </MudTooltip>
        </MudItem>
    </MudGrid>

    <MudText>Domains referenced in email body:</MudText>
    @for(int i=0; i<domains.Count();i++)
    {
        var index = i;

        string tip = "This domain's reputation is yet to be checked'";
        if(domainChipIcons[index] == Icons.Material.Filled.Dangerous)
        {
            tip = "This domain has been flagged as dangerous by VirusTotal.";
        }
        else if(domainChipIcons[index] == Icons.Material.Filled.WarningAmber)
        {
            tip = "This domain has not been scanned before";
        }
        else if ( domainChipIcons[index] == Icons.Material.Filled.Check)
        {
            tip = "This domain is though to be safe by VirusTotal";
        }

        <MudTooltip Text="@tip">
            <MudChip Icon="@domainChipIcons[index]" IconColor="@domainChipColors[index]"
                        OnClick="() => VerifyDomain(index)">@domains[index]
            </MudChip>

        </MudTooltip>

        
    }

</MudPaper>



